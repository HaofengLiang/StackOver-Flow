<!-- views/parts/postDataHelper.ejs -->
<script type="text/javascript">
	function postData(data, url, callback){
	    $.ajax({
	        type: "POST",
	        url: url,
	        data: JSON.stringify(data),
	        contentType: "application/json; charset=utf-8",
	        dataType: "json",
	        success: function(sucMsg){
	            callback(sucMsg);
	        },
	        failure: function(errMsg) {
	            alert(errMsg);
	        }
	    });
	}
	function getData(url, callback){
	    $.ajax({
	        type: "GET",
	        url: url,
	        data: JSON.stringify(data),
	        contentType: "application/json; charset=utf-8",
	        dataType: "json",
	        success: function(sucMsg){
	            callback(sucMsg);
	        },
	        failure: function(errMsg) {
	            alert(errMsg);
	        }
	    });
	}
	function objectizeFormArray(formArray) {
	    var obj={};
	    for(var i in formArray){
	        obj[formArray[i]['name']] = formArray[i]['value'];
	    }
	    return obj;
	}

	function postForm(event, formId, postUrl, callback) {
	    var form;
	    if (formId != null)
	        form = $(formId);
	    else
	        form = $("form");
	    event.preventDefault();
	    postData(objectizeFormArray(form.serializeArray()), postUrl, callback);
	    // if (formId != null)
	    //     window.location.href = redirectUrl;
	}
</script>